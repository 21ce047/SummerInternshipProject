<!DOCTYPE html>
<html>
<head>
    <title>Student Internship Details</title>
    <link rel="stylesheet" type="text/css" href="../public/css/style4.css">
</head>
<body>
    <div class="navbarr">
        <img class="charusat-logo" src="/assets/charusat-logo.png" />
    </div>
    <h1>Student Internship Details</h1>
    <table id="student-table">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>View</th>
            <th>Status</th>
        </tr>
        <% students.forEach((student) => { %>
            <tr>
                <td><%= student.StudentID %></td>
                <td><%= student.StudentName %></td>
                <td>
                    <a href="../views/user-details.html">View</a>
                </td>
                <td><%= student.Status %></td>
            </tr>
        <% }); %>
    </table>
    <div id="pagination-container">
        <a href="/approved?page=<%= currentPage - 1 %>" id="prev-button" <% if (currentPage <= 1) { %>disabled<% } %>>Previous</a>
        <span id="page-number"><%= currentPage %></span>
        <a href="/approved?page=<%= currentPage + 1 %>" id="next-button" <% if (currentPage >= totalPages) { %>disabled<% } %>>Next</a>
    </div>

    <script>
        const students = <%= JSON.stringify(students) %>; // Your student data
    
        const entriesPerPage = 20;
        let currentPage = <%= currentPage %>; // Current page number
        const totalPages = Math.ceil(students.length / entriesPerPage);
    
        const studentTable = document.getElementById("student-table");
        const prevButton = document.getElementById("prev-button");
        const nextButton = document.getElementById("next-button");
        const pageNumber = document.getElementById("page-number");
    
        function updateTable() {
            // Clear the table
            while (studentTable.rows.length > 1) {
                studentTable.deleteRow(1);
            }
    
            const startIdx = (currentPage - 1) * entriesPerPage;
            const endIdx = Math.min(startIdx + entriesPerPage, students.length);
    
            for (let i = startIdx; i < endIdx; i++) {
                const student = students[i];
                const row = studentTable.insertRow();
                row.insertCell(0).textContent = student.StudentID;
                row.insertCell(1).textContent = student.StudentName;
                const viewCell = row.insertCell(2);
                const viewLink = document.createElement("a");
                viewLink.textContent = "View";
                viewLink.href = "../views/user-details.html"; // Set the link to user-details.html
                viewCell.appendChild(viewLink);
                row.insertCell(3).textContent = student.Status;
            }
    
            pageNumber.textContent = currentPage;
            prevButton.disabled = currentPage <= 1;
            nextButton.disabled = currentPage >= totalPages;
        }
    
        prevButton.addEventListener("click", function() {
            if (currentPage > 1) {
                currentPage--;
                updateTable();
            }
        });
    
        nextButton.addEventListener("click", function() {
            if (currentPage < totalPages) {
                currentPage++;
                updateTable();
            }
        });
    
        // Ensure the updateTable function is called when the page loads
        document.addEventListener("DOMContentLoaded", function() {
            updateTable();
        });
    </script>
    
</body>
</html>
